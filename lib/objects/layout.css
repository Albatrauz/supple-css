/*! supple.objects.layout | MIT License | github.com/supple-css */

/*  =========================================================================
    objects.layout
    Fluid and nestable layout system based on flexbox.
    ========================================================================= */

/*  Variables
    ========================================================================= */

:root {
  --o-layout-columns: 12;
  --o-layout-colspan: var(--o-layout-columns);
  --o-layout-gutter: var(--supple-space, 24px);
  --o-layout-gutter-tiny: var(--supple-space-tiny, 6px);
  --o-layout-gutter-small: var(--supple-space-small, 12px);
  --o-layout-gutter-large: var(--supple-space-large, 48px);
  --o-layout-gutter-huge: var(--supple-space-huge, 96px);


  /**
   * @apply rule: Make a cell shrink wrap its content.
   */
  --o-layout__cell--fit: {
    flex-basis: auto;
  };


  /**
   * @apply rule: Make a cell fill the remaining space.
   *
   * 1. Be explicit to work around IE10 bug with shorthand flex
   * 2. IE10 ignores previous `flex-basis` value. Setting again here fixes
   */
  --o-layout__cell--fill: {
    flex: 1 1 0%; /* [1] */
    flex-basis: 0%; /* [2] */
  };


  /**
   * @apply rule: Make a cell fill the remaining space in a vertical layout
   *
   * 1. Make IE11 behave and fill stuff out properly
   */
  --o-layout--vertical__cell--fill: {
    flex-basis: auto; /* [1] */
  };
}



/*  Layout root
    ========================================================================= */

/**
 * All content must be contained within child `o-layout__cell` elements.
 *
 * 1. Account for browser defaults of elements that might be the root node of
 *    the component.
 */
.o-layout {
  display: flex; /* [1] */
  flex-flow: row wrap;
  padding: 0; /* [1] */
  margin-left: 0; /* [1] */
  list-style: none; /* [1] */
}


/**
 * Modifier: center align all layout cells
 */
.o-layout--align-center {
  justify-content: center;
}


/**
 * Modifier: right align all layout cells
 */
.o-layout--align-right {
  justify-content: flex-end;
}


/**
 * Modifier: middle-align layout cells
 */
.o-layout--align-middle {
  align-items: center;
}


/**
 * Modifier: bottom-align layout cells
 */
.o-layout--align-bottom {
  align-items: flex-end;
}


/**
 * Modifier: reverse all cells
 */
.o-layout--reverse {
  flex-direction: row-reverse;
}


/**
 * Modifier: allow cells to equal distribute width
 *
 * 1. Provide all values to avoid IE10 bug with shorthand flex
 *    http://git.io/vllC7
 *
 *    Use `0%` to avoid bug in IE10/11 with unitless flex basis
 *    http://git.io/vllWx
 */
.o-layout--fit > .o-layout__cell {
  flex: 1 1 0%; /* [1] */
}


/**
 * Modifier: all cells match height of tallest cell in a row
 * 1. The direct child of the flexbox must be a single element when you want
 *    to use equalheight
 */
.o-layout--equalheight > .o-layout__cell {
  display: flex;
}

.o-layout--equalheight > .o-layout__cell > * {
  width: 100%; /* [1] */
}


/**
 * Modifier: vertical
 * Throws layout in vertical mode
 */
.o-layout--vertical {
  flex-flow: column;
}


/**
 * Modifier: vertical
 * Filthy ass selector to target ie11 for a dirrty fix
 *
 * 1. fix for ie11 bug where flex items with a percentage based `flex-basis`
 *    renders with 0 height.
 */
_:-ms-fullscreen, :root .o-layout--vertical > .o-layout__cell { /* stylelint-disable-line selector-type-no-unknown */
  flex-basis: auto; /* [1] */
}


/**
 * Modifier: vertical
 * Reset gutters
 */
.o-layout--vertical[class*="o-layout--gutter"] {
  margin-left: 0;
}

.o-layout--vertical[class*="o-layout--gutter"] > .o-layout__cell {
  padding-left: 0;
}


/**
 * Modifier: Gutter
 */
.o-layout--gutter {
  margin-left: calc(-1 * var(--o-layout-gutter));
}

.o-layout--gutter > .o-layout__cell {
  padding-left: var(--o-layout-gutter);
}

/* gutter in vertical mode */
.o-layout--gutter.o-layout--vertical {
  margin-top: calc(-1 * var(--o-layout-gutter));
}

.o-layout--gutter.o-layout--vertical > .o-layout__cell {
  padding-top: var(--o-layout-gutter);
}


/**
 * Modifier: Tiny gutter
 */
.o-layout--gutter-tiny {
  margin-left: calc(-1 * var(--o-layout-gutter-tiny));
}

.o-layout--gutter-tiny > .o-layout__cell {
  padding-left: var(--o-layout-gutter-tiny);
}

/* gutter-tiny in vertical mode */
.o-layout--gutter-tiny.o-layout--vertical {
  margin-top: calc(-1 * var(--o-layout-gutter-tiny));
}

.o-layout--gutter-tiny.o-layout--vertical > .o-layout__cell {
  padding-top: var(--o-layout-gutter-tiny);
}


/**
 * Modifier: Small gutter
 */
.o-layout--gutter-small {
  margin-left: calc(-1 * var(--o-layout-gutter-small));
}

.o-layout--gutter-small > .o-layout__cell {
  padding-left: var(--o-layout-gutter-small);
}

/* gutter-small in vertical mode */
.o-layout--gutter-small.o-layout--vertical {
  margin-top: calc(-1 * var(--o-layout-gutter-small));
}

.o-layout--gutter-small.o-layout--vertical > .o-layout__cell {
  padding-top: var(--o-layout-gutter-small);
}


/**
 * Modifier: Large gutter
 */
.o-layout--gutter-large {
  margin-left: calc(-1 * var(--o-layout-gutter-large));
}

.o-layout--gutter-large > .o-layout__cell {
  padding-left: var(--o-layout-gutter-large);
}

/* gutter-large in vertical mode */
.o-layout--gutter-large.o-layout--vertical {
  margin-top: calc(-1 * var(--o-layout-gutter-large));
}

.o-layout--gutter-large.o-layout--vertical > .o-layout__cell {
  padding-top: var(--o-layout-gutter-large);
}


/**
 * Modifier: Huge gutter
 */
.o-layout--gutter-huge {
  margin-left: calc(-1 * var(--o-layout-gutter-huge));
}

.o-layout--gutter-huge > .o-layout__cell {
  padding-left: var(--o-layout-gutter-huge);
}

/* gutter-huge in vertical mode */
.o-layout--gutter-huge.o-layout--vertical {
  margin-top: calc(-1 * var(--o-layout-gutter-huge));
}

.o-layout--gutter-huge.o-layout--vertical > .o-layout__cell {
  padding-top: var(--o-layout-gutter-huge);
}



/*  Layout cell
    ========================================================================= */

/**
 * No explicit width by default. You can provide a colspan to provide width.
 * Alternatively you can add a fraction utility or a component class that
 * extends 'o-layout'.
 *
 * 1. Set flex items to full width by default, or an explicit
 *    width when you provide a colspan
 * 2. Fix issue where elements with overflow extend past the
 *    `o-layout__cell` container
 */
.o-layout__cell {
  flex-basis: calc(100% / var(--o-layout-columns) * var(--o-layout-colspan)); /* [1] */
  min-width: 0; /* [2] */
}


/**
 * Modifier: horizontally center one unit
 * Set a specific unit to be horizontally centered. Doesn't affect
 * any other units. Can still contain a child `o-layout` object.
 */
.o-layout__cell--center {
  margin-left: auto;
  margin-right: auto;
}


/**
 * Modifier: Make a cell shrink wrap its content.
 */
.o-layout__cell--fit {
  flex-basis: auto;
}


/**
 * Modifier: Make a cell fill the remaining space.
 * 1. Be explicit to work around IE10 bug with shorthand flex
 * 2. IE10 ignores previous `flex-basis` value. Setting again here fixes
 */
.o-layout__cell--fill {
  flex: 1 1 0%; /* [1] */
  flex-basis: 0%; /* [2] */
}


/**
 * Modifier: Make a cell fill the remaining space.
 * 1. Make IE11 behave and fill stuff out properly
 */
.o-layout--vertical > .o-layout__cell--fill {
  flex-basis: auto; /* [1] */
}



/*  Responsive fitters & fillers
    ========================================================================= */

@media (--palm) {
  .o-layout__cell--fit\@palm {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@palm {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@palm {
    flex-basis: auto;
  }
}

@media (--max-palm) {
  .o-layout__cell--fit\@max-palm {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@max-palm {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@max-palm {
    flex-basis: auto;
  }
}

@media (--lap) {
  .o-layout__cell--fit\@lap {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@lap {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@lap {
    flex-basis: auto;
  }
}

@media (--max-lap) {
  .o-layout__cell--fit\@max-lap {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@max-lap {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@max-lap {
    flex-basis: auto;
  }
}

@media (--desk) {
  .o-layout__cell--fit\@desk {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@desk {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@desk {
    flex-basis: auto;
  }
}

@media (--max-desk) {
  .o-layout__cell--fit\@max-desk {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@max-desk {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@max-desk {
    flex-basis: auto;
  }
}

@media (--wall) {
  .o-layout__cell--fit\@wall {
    flex-basis: auto;
  }

  .o-layout__cell--fill\@wall {
    flex: 1 1 0%;
    flex-basis: 0%;
  }

  .o-layout--vertical > .o-layout__cell--fill\@wall {
    flex-basis: auto;
  }
}
